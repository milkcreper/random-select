<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>ãƒ©ãƒ³ãƒ€ãƒ ã‚¿ã‚¹ã‚¯å‰²ã‚Šå½“ã¦</title>
<style>
body { font-family: sans-serif; margin: 20px; }
textarea, input { width: 100%; margin-top: 6px; }
button { margin-top: 8px; padding: 6px 14px; }
.task-item { margin-top: 4px; }
.groupA { color: red; }
.groupB { color: blue; }
.result { white-space: pre-line; margin-top: 15px; }
hr { margin: 20px 0; }
</style>
</head>
<body>

<h1>ãƒ©ãƒ³ãƒ€ãƒ ã‚¿ã‚¹ã‚¯å‰²ã‚Šå½“ã¦</h1>

<h2>â‘  åå‰ï¼ˆæ”¹è¡ŒåŒºåˆ‡ã‚Šãƒ»æœ€å¤§10äººï¼‰</h2>
<textarea id="names" rows="5"></textarea>

<hr>

<h2>â‘¡ ã‚¿ã‚¹ã‚¯ç®¡ç†</h2>
<input id="newTask" placeholder="æ–°ã—ã„ã‚¿ã‚¹ã‚¯ã‚’å…¥åŠ›">
<button onclick="addTask()">ã‚¿ã‚¹ã‚¯è¿½åŠ </button>
<div id="taskList"></div>

<hr>

<h2>â‘¢ å®Ÿè¡Œ</h2>
<label>
  <input type="checkbox" id="taskOn" checked>
  ã‚¿ã‚¹ã‚¯ã‚’ä»˜ä¸ã™ã‚‹
</label><br>

<button onclick="run()">å®Ÿè¡Œ</button>
<button onclick="reroll()">ğŸ” ã‚¿ã‚¹ã‚¯å†æŠ½é¸</button>

<div class="result" id="result"></div>

<script>
// ===== ã‚¿ã‚¹ã‚¯ï¼ˆå…¨ã¦å¸¸ã«æœ‰åŠ¹ï¼‰=====
let tasks = [
  "å‰é€²ã‚­ãƒ¼å¤–ã™",
  "ADSç¦æ­¢",
  "ãƒ˜ãƒ“ãƒ¼ã‚¢ãƒ¼ãƒãƒ¼ç¦æ­¢"
];

// ===== çŠ¶æ…‹ =====
let groupA = [];
let groupB = [];
let taskOn = true;

// ===== å…±é€š =====
const shuffle = arr => arr.slice().sort(() => Math.random() - 0.5);

// ===== ã‚¿ã‚¹ã‚¯UI =====
function renderTasks() {
  const list = document.getElementById("taskList");
  list.innerHTML = "";
  tasks.forEach(t => {
    const div = document.createElement("div");
    div.className = "task-item";
    div.textContent = "ãƒ»" + t;
    list.appendChild(div);
  });
}

function addTask() {
  const input = document.getElementById("newTask");
  if (!input.value.trim()) return;
  tasks.push(input.value.trim());
  input.value = "";
  renderTasks();
}

// ===== å®Ÿè¡Œ =====
function run() {
  const names = document.getElementById("names").value
    .split("\n").map(n => n.trim()).filter(Boolean);

  if (names.length === 0 || names.length > 10) {
    alert("åå‰ã¯1ã€œ10äººã§å…¥åŠ›ã—ã¦ãã ã•ã„");
    return;
  }

  taskOn = document.getElementById("taskOn").checked;

  const shuffled = shuffle(names);
  groupA = shuffled.slice(0, 5);
  groupB = shuffled.slice(5, 10);

  assign();
}

// ===== å†æŠ½é¸ =====
function reroll() {
  if (groupA.length === 0 && groupB.length === 0) {
    alert("å…ˆã«å®Ÿè¡Œã—ã¦ãã ã•ã„");
    return;
  }
  assign();
}

// ===== å‰²ã‚Šå½“ã¦ =====
function assign() {
  const shuffledTasks = shuffle(tasks);

  if (taskOn && shuffledTasks.length < groupA.length + groupB.length) {
    alert("ã‚¿ã‚¹ã‚¯æ•°ãŒè¶³ã‚Šã¾ã›ã‚“");
    return;
  }

  let i = 0;
  let html = `<div class="groupA">ã€ã‚°ãƒ«ãƒ¼ãƒ—Aã€‘\n`;
  groupA.forEach(n => {
    html += n + (taskOn ? " ï¼š " + shuffledTasks[i++] : "") + "\n";
  });
  html += `</div>\n<div class="groupB">ã€ã‚°ãƒ«ãƒ¼ãƒ—Bã€‘\n`;
  groupB.forEach(n => {
    html += n + (taskOn ? " ï¼š " + shuffledTasks[i++] : "") + "\n";
  });
  html += "</div>";

  document.getElementById("result").innerHTML = html;
}

// åˆæœŸåŒ–
renderTasks();
</script>

</body>
</html>
