<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>ãƒ©ãƒ³ãƒ€ãƒ ã‚¿ã‚¹ã‚¯å‰²ã‚Šå½“ã¦</title>
<style>
body { font-family: sans-serif; margin: 20px; }
input { width: 100%; margin-top: 4px; }
button { margin-top: 8px; padding: 6px 12px; }
.task-item { display: flex; align-items: center; gap: 8px; margin-top: 4px; }
.groupA { color: red; }
.groupB { color: blue; }
.result { white-space: pre-line; margin-top: 15px; }
.grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
.task-delete { cursor: pointer; color: gray; }
.task-delete:hover { color: black; }
</style>
</head>
<body>

<h1>ãƒ©ãƒ³ãƒ€ãƒ ã‚¿ã‚¹ã‚¯å‰²ã‚Šå½“ã¦</h1>

<div class="grid">
  <div>
    <h2 class="groupA">ã‚°ãƒ«ãƒ¼ãƒ—Aï¼ˆæœ€å¤§10äººï¼‰</h2>
    <div id="groupAInputs"></div>
  </div>
  <div>
    <h2 class="groupB">ã‚°ãƒ«ãƒ¼ãƒ—Bï¼ˆæœ€å¤§10äººï¼‰</h2>
    <div id="groupBInputs"></div>
  </div>
</div>

<hr>

<h2>ã‚¿ã‚¹ã‚¯ç®¡ç†</h2>
<input id="newTask" placeholder="æ–°ã—ã„ã‚¿ã‚¹ã‚¯ã‚’å…¥åŠ›">
<button onclick="addTask()">ã‚¿ã‚¹ã‚¯è¿½åŠ </button>
<div id="taskList"></div>

<hr>

<label>
  <input type="checkbox" id="taskOn" checked>
  ã‚¿ã‚¹ã‚¯ã‚’ä»˜ä¸ã™ã‚‹
</label><br>

<button onclick="run()">å®Ÿè¡Œ</button>
<button onclick="reroll()">ğŸ” ã‚¿ã‚¹ã‚¯å†æŠ½é¸</button>

<div class="result" id="result"></div>

<script>
// ===== åˆæœŸã‚¿ã‚¹ã‚¯ =====
let tasks = [
  "å‰é€²ã‚­ãƒ¼å¤–ã™",
  "ADSç¦æ­¢",
  "ãƒ˜ãƒ“ãƒ¼ã‚¢ãƒ¼ãƒãƒ¼ç¦æ­¢"
];

// ===== çŠ¶æ…‹ =====
let groupA = [];
let groupB = [];
let taskOn = true;

// ===== å…±é€š =====
const shuffle = arr => arr.slice().sort(() => Math.random() - 0.5);

// ===== åå‰å…¥åŠ›ç”Ÿæˆ =====
function renderNameInputs() {
  const a = document.getElementById("groupAInputs");
  const b = document.getElementById("groupBInputs");
  a.innerHTML = b.innerHTML = "";

  for (let i = 0; i < 10; i++) {
    a.appendChild(createNameInput());
    b.appendChild(createNameInput());
  }
}

function createNameInput() {
  const input = document.createElement("input");
  input.placeholder = "åå‰";
  return input;
}

// ===== ã‚¿ã‚¹ã‚¯UI =====
function renderTasks() {
  const list = document.getElementById("taskList");
  list.innerHTML = "";
  tasks.forEach((t, i) => {
    const div = document.createElement("div");
    div.className = "task-item";

    const span = document.createElement("span");
    span.textContent = t;

    const del = document.createElement("span");
    del.textContent = "Ã—";
    del.className = "task-delete";
    del.onclick = () => {
      tasks.splice(i, 1);
      renderTasks();
    };

    div.appendChild(span);
    div.appendChild(del);
    list.appendChild(div);
  });
}

function addTask() {
  const input = document.getElementById("newTask");
  if (!input.value.trim()) return;
  tasks.push(input.value.trim());
  input.value = "";
  renderTasks();
}

// ===== å®Ÿè¡Œ =====
function run() {
  groupA = [...document.querySelectorAll("#groupAInputs input")]
    .map(i => i.value.trim()).filter(Boolean);
  groupB = [...document.querySelectorAll("#groupBInputs input")]
    .map(i => i.value.trim()).filter(Boolean);

  if (groupA.length + groupB.length === 0) {
    alert("åå‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„");
    return;
  }

  taskOn = document.getElementById("taskOn").checked;
  assign();
}

// ===== å†æŠ½é¸ =====
function reroll() {
  if (groupA.length + groupB.length === 0) {
    alert("å…ˆã«å®Ÿè¡Œã—ã¦ãã ã•ã„");
    return;
  }
  assign();
}

// ===== å‰²ã‚Šå½“ã¦ =====
function assign() {
  const shuffledTasks = shuffle(tasks);

  if (taskOn && shuffledTasks.length < groupA.length + groupB.length) {
    alert("ã‚¿ã‚¹ã‚¯æ•°ãŒè¶³ã‚Šã¾ã›ã‚“");
    return;
  }

  let i = 0;
  let html = `<div class="groupA">ã€ã‚°ãƒ«ãƒ¼ãƒ—Aã€‘\n`;
  groupA.forEach(n => {
    html += n + (taskOn ? " ï¼š " + shuffledTasks[i++] : "") + "\n";
  });

  html += `</div>\n<div class="groupB">ã€ã‚°ãƒ«ãƒ¼ãƒ—Bã€‘\n`;
  groupB.forEach(n => {
    html += n + (taskOn ? " ï¼š " + shuffledTasks[i++] : "") + "\n";
  });
  html += "</div>";

  document.getElementById("result").innerHTML = html;
}

// åˆæœŸåŒ–
renderNameInputs();
renderTasks();
</script>

</body>
</html>
